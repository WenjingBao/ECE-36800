CFLAGS = -std=c99 -g -Wall -Wshadow --pedantic -Wunreachable-code -Wvla -Werror -Wunreachable-code
COVFLAGS = 
PROFFLAG = 
GCC = gcc $(CFLAGS) $(COVFLAGS) $(PROFFLAG)

VPATH = .

compress.o:
	$(GCC) -c compress.c

ch: huff.o
	$(GCC) huff.o compress.o -o myhuff
cu: unhuff.o
	$(GCC) unhuff.o compress.o -o myunhuff
h.c.o: 
	$(GCC) -c huff.c compress.c
u.c.o: 
	$(GCC) -c unhuff.c compress.c

testh:ch
	./myhuff inputs/text0.txt
	./myhuff inputs/text1.txt
	./myhuff inputs/text2.txt
	./myhuff inputs/text3.txt
	./myhuff inputs/text4.txt
	./myhuff inputs/text5.txt

testu:cu
	./myunhuff inputs/text0.txt.huff
	./myunhuff inputs/text1.txt.huff
	./myunhuff inputs/text2.txt.huff
	./myunhuff inputs/text3.txt.huff
	./myunhuff inputs/text4.txt.huff
	./myunhuff inputs/text5.txt.huff

memory:testh
	valgrind --tool=memcheck --leak-check=full ./myhuff inputs/text0.txt
	valgrind --tool=memcheck --leak-check=full ./myhuff inputs/text1.txt
	valgrind --tool=memcheck --leak-check=full ./myhuff inputs/text2.txt
	valgrind --tool=memcheck --leak-check=full ./myhuff inputs/text3.txt
	valgrind --tool=memcheck --leak-check=full ./myhuff inputs/text4.txt
	valgrind --tool=memcheck --leak-check=full ./myhuff inputs/text5.txt
clean:
	/bin/rm -f *.o
	/bin/rm -f myhuff
	/bin/rm -f text0.txt.huff
	/bin/rm -f text1.txt.huff
	/bin/rm -f text2.txt.huff
	/bin/rm -f text3.txt.huff
	/bin/rm -f text4.txt.huff
	/bin/rm -f text5.txt.huff
	/bin/rm -f text0.txt.huff.unhuff
	/bin/rm -f text1.txt.huff.unhuff
	/bin/rm -f text2.txt.huff.unhuff
	/bin/rm -f text3.txt.huff.unhuff
	/bin/rm -f text4.txt.huff.unhuff
	/bin/rm -f text5.txt.huff.unhuff
